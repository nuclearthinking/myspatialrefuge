---
alwaysApply: true
---

# GitHub Issues Tool

When working with GitHub issues for this project, use the CLI tool at `utils/gh_issues.py`.

## How to Run

Always use `uv run` from the project root:

```bash
cd "C:\Users\onifent\Zomboid\Workshop\MySpatialRefuge"
uv run utils/gh_issues.py <command> [options] --output json
```

## Available Commands

| Command | Usage | Description |
|---------|-------|-------------|
| `list` | `uv run utils/gh_issues.py list --output json` | List open issues |
| `view` | `uv run utils/gh_issues.py view <N> --output json` | View issue details |
| `create` | `uv run utils/gh_issues.py create --title "..." --body "..." --output json` | Create new issue |
| `close` | `uv run utils/gh_issues.py close <N> --output json` | Close an issue |
| `reopen` | `uv run utils/gh_issues.py reopen <N> --output json` | Reopen issue |
| `comment` | `uv run utils/gh_issues.py comment <N> --body "..." --output json` | Add comment |
| `edit` | `uv run utils/gh_issues.py edit <N> --title "..." --output json` | Edit issue |
| `search` | `uv run utils/gh_issues.py search "query" --output json` | Search issues |
| `labels` | `uv run utils/gh_issues.py labels --output json` | List labels |
| `schema` | `uv run utils/gh_issues.py schema` | Get full tool schema |

## Important Options

- `--output json` or `-o json` — Always use for machine-readable output
- `--state open|closed|all` — Filter issues by state
- `--labels "bug,feature"` — Filter by labels (comma-separated)
- `--comments` or `-c` — Include comments when viewing issue
- `--type bug|feature|task` — Use template when creating
- `--body-file` or `-f` — Read body from file (preserves backticks, recommended for code)
- `--stdin` — Read body from stdin (comment command only)

## Handling Code Blocks and Backticks

**Problem:** PowerShell uses backticks (`) as escape characters, which breaks inline code formatting.

**Solution:** Use `--body-file` to read content from a file:

```bash
# Create a temp file with proper markdown
# Then use --body-file to preserve backticks

uv run utils/gh_issues.py comment 42 --body-file comment.md --output json
uv run utils/gh_issues.py create --title "Bug" --body-file body.md --output json
uv run utils/gh_issues.py edit 42 --body-file updated_body.md --output json
```

This bypasses shell escaping and preserves all markdown formatting including:
- Inline code: `` `functionName()` ``
- Code blocks: ` ```java ... ``` `

## Examples

```bash
# List all open issues
uv run utils/gh_issues.py list --state open --output json

# View issue #42 with comments
uv run utils/gh_issues.py view 42 --comments --output json

# Create a bug report
uv run utils/gh_issues.py create --type bug --title "Login fails" --body "Error when..." --output json

# Search for multiplayer issues
uv run utils/gh_issues.py search "multiplayer" --state open --output json

# Close issue with comment
uv run utils/gh_issues.py close 42 --comment "Fixed in commit abc123" --output json

# Edit issue title and add label
uv run utils/gh_issues.py edit 42 --title "New title" --add-labels "priority-high" --output json
```

## Best Practices

1. Always use `--output json` for parsing results
2. Run from project root: `C:\Users\onifent\Zomboid\Workshop\MySpatialRefuge`
3. Use `schema` command if you need to check available options
4. When creating issues, use `--type` for structured templates
5. Check `status` first if authentication issues occur

## How to Properly Report Issues

### Issue Structure

**Good Title Format:**
- Bug: `"[Bug] Player can't plumb rain barrels in spatial refuge"`
- Feature: `"[Feature] Add custom water storage system"`
- Task: `"[Task] Implement IsoBuilding for refuge area"`

**Body Structure:**
Use proper markdown sections with actual newlines (not `\n` escape sequences):

```bash
uv run utils/gh_issues.py create \
  --type bug \
  --title "Cannot plumb sinks in refuge" \
  --body "## Description

The plumbing context menu does not appear for sinks inside the spatial refuge.

## Steps to Reproduce

1. Enter spatial refuge
2. Place a sink and rain barrel
3. Right-click on sink
4. Plumbing option is missing

## Expected Behavior

Should see plumbing options like in normal buildings.

## Technical Details

- Game version: 41.78.16
- Mod version: 1.0.0
- Multiplayer: Yes/No" \
  --output json
```

### Formatting Tips

**✅ DO:**
- Use actual newlines in body text (multiline strings in shell)
- Include clear sections: Description, Steps to Reproduce, Expected Behavior
- Add technical context (versions, multiplayer, related code files)
- Reference related issues with `#number`
- Use markdown formatting (headers, lists, code blocks)
- Add evidence (error logs, screenshots, code snippets)

**❌ DON'T:**
- Don't use `\n` escape sequences - they render as literal text
- Don't create vague titles like "Bug" or "Fix this"
- Don't skip reproduction steps for bugs
- Don't forget to specify priority/impact for critical issues

### For Bug Reports

Include:
1. **Clear description** of what's broken
2. **Steps to reproduce** (numbered list)
3. **Expected vs actual behavior**
4. **Root cause** if known (especially for technical users)
5. **Workarounds** if any exist
6. **Impact on players** (critical/high/medium/low)

### For Feature Requests

Include:
1. **Problem statement** - what need does this address?
2. **Proposed solution** - how should it work?
3. **Implementation approach** - technical details
4. **Benefits** - why is this valuable?
5. **Complexity estimate** - rough development time

### For Technical Issues

Include:
1. **Root cause analysis** - what's causing the problem?
2. **Affected systems** - what code/features are impacted?
3. **Solution options** - multiple approaches with pros/cons
4. **Recommended approach** - which solution is best and why?
5. **Related issues** - link to dependencies or blockers

### Editing Issues

If formatting is broken after creation, fix it with `edit`:

```bash
uv run utils/gh_issues.py edit 12 --body "## Properly Formatted

This text has actual newlines and renders correctly on GitHub.

### Sections Work

- Lists work
- Code formatting works" --output json
```